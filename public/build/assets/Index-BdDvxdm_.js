import{j as y,h as K,T as A,p as O,k as Q,f as b,o as m,a as s,l as V,u as o,Z,w as v,b as e,t as f,v as z,e as G,F as B,m as H,i as J,c as w,d as D,g as k,N as P}from"./app-hhDuPdHH.js";import{_ as W}from"./AuthenticatedLayout-oNJChgpc.js";import{_ as n,a as c}from"./TextInput-CSQ0HSOC.js";import{_ as r}from"./InputError-CfbCBCLX.js";import{P as E}from"./PrimaryButton-DJo9UChS.js";import{_ as x}from"./Modal-B-YGY0-b.js";import{h as X}from"./moment-C5S46NFB.js";import{_ as S}from"./Editor-C7ntQR5u.js";const ee={class:"app-user-list mb-5"},se={class:"card rounded-0"},le={class:"card-datatable table-responsive p-0"},te={class:"p-3"},ae={class:"fs-5 mb-1"},oe={class:"d-flex align-items-center justify-content-between"},ie=e("i",{class:"bi bi-plus-lg fs-4"},null,-1),de={class:"page-list-table table p-0"},ne=e("thead",{class:"bg-black border-none"},[e("tr",{class:"border-none"},[e("th",{class:"sorting text-white"},"Image"),e("th",{class:"sorting text-white"},"Name"),e("th",{class:"sorting text-white"},"Parent Category"),e("th",{class:"sorting text-white"},"Created At"),e("th",{class:"sorting text-white"},"Action")])],-1),re=["src"],ue={class:"d-flex gap-2 actions"},me=["onClick"],ce=e("i",{class:"bi bi-pencil-square"},null,-1),be=[ce],ge=e("i",{class:"bi bi-trash"},null,-1),ve={class:"p-5 bg-white d-flex align-items-center justify-content-between"},pe=e("h2",{class:"mb-4"},"Add new Category",-1),_e={class:"mb-3"},he={class:"mb-3"},ye={class:"mb-4"},fe={class:"category-image"},we={for:"category-image"},Ce=e("i",{class:"bi bi-cloud-arrow-up"},null,-1),Ve=e("span",null,"Upload Image",-1),ke={class:"category-image-preview"},Se=["src"],Ue={class:"mb-3"},xe={class:"mb-3"},Ie={class:"mb-3"},$e={class:"mb-3"},Le={key:0,class:"spinner-border pinner-border-sm",role:"status"},Me=e("span",{class:"visually-hidden"},"Loading...",-1),Ne=[Me],Ae={key:1},Be={class:"category-add"},De=e("h2",{class:"mb-4"},"Update Category",-1),Pe={class:"mb-3"},Ee={class:"mb-3"},Re={class:"mb-4"},Te={class:"category-image"},je={for:"category-edit-image"},Fe=e("i",{class:"bi bi-cloud-arrow-up"},null,-1),Ye=e("span",null,"Upload Image",-1),qe={class:"category-image-preview"},Ke=["src"],Oe={class:"mb-3"},Qe={class:"mb-3"},Ze={class:"mb-3"},ze={class:"mb-3"},Ge={class:"mb-3"},He={class:"mb-3"},Je={key:0,class:"spinner-border pinner-border-sm",role:"status"},We=e("span",{class:"visually-hidden"},"Loading...",-1),Xe=[We],es={key:1},ss=e("h3",null,"Edit Category",-1),ms={__name:"Index",props:{categories:Array,subCategories:Array,errors:Array},setup(d){const I=d,C=y(null),_=y(null),p=y(!1),g=y(!1),h=y(""),$=K(()=>h.value?I.subCategories.filter(i=>i.name&&i.name.toLowerCase().includes(h.value.toLowerCase())||i.category&&i.category.name&&i.category.name.toLowerCase().includes(h.value.toLowerCase())):I.subCategories),u=A({name:null,image:null,slug:null,canonicalurl:null,metatitle:null,metakeyword:null,metadescription:null,description:null,category_id:null}),R=i=>{const t=i.target.files[0];u.image=t,C.value=URL.createObjectURL(t)},T=()=>{document.getElementById("addCategory").$vb.modal.show()},j=()=>{u.category_id==null?g.value="The Parent Category Field is Required.":P.post("/sub-categories",{...u},{onStart:()=>{p.value=!0},onSuccess:()=>{u.reset(),C.value=null,g.value=null,document.getElementById("addCategory").$vb.modal.hide()},onFinish:()=>{p.value=!1}})},F=i=>{const t=i.target.files[0];a.image=t,_.value=URL.createObjectURL(t)},a=A({id:null,name:null,image:null,category_id:null,slug:null,canonicalurl:null,metatitle:null,metakeyword:null,metadescription:null,description:null}),Y=i=>{document.getElementById("editCategory").$vb.modal.show(),a.id=i.id,a.category_id=i.category_id,a.name=i.name,a.slug=i.slug,a.canonicalurl=i.canonicalurl,a.metatitle=i.metatitle,a.metakeyword=i.metakeyword,a.metadescription=i.metadescription,a.description=i.description,_.value=i.image},q=i=>{a.parent_id===null?g.value="The Parent Category Field is Required.":P.post(`/update-sub-category/${i}`,{...a},{onStart:()=>{p.value=!0},onSuccess:()=>{_.value=null,a.reset(),document.getElementById("editCategory").$vb.modal.hide()},onFinish:()=>{p.value=!1}})};return(i,t)=>{const L=O("v-select"),U=Q("vb-is");return m(),b(B,null,[s(o(Z),{title:"Sub Categories"}),s(W,null,{default:v(()=>{var M;return[e("section",ee,[e("div",se,[e("div",le,[e("div",te,[e("p",ae,"Total "+f((M=d.subCategories)==null?void 0:M.length)+" Sub Categories",1),e("div",oe,[V(e("input",{type:"text",class:"p-2 border border-secondary rounded w-100 w-lg-25",placeholder:"Search Sub Category..","onUpdate:modelValue":t[0]||(t[0]=l=>h.value=l)},null,512),[[z,h.value]]),e("button",{class:"button-primary",onClick:T},[ie,G(" Add New Sub Category ")])])]),e("table",de,[ne,e("tbody",null,[(m(!0),b(B,null,H($.value,l=>{var N;return m(),b("tr",{key:l.id},[e("td",null,[e("img",{src:l==null?void 0:l.image,alt:"",width:"80"},null,8,re)]),e("td",null,f(l==null?void 0:l.name),1),e("td",null,f((N=l==null?void 0:l.category)==null?void 0:N.name),1),e("td",null,f(o(X)(l==null?void 0:l.created_at).format("DD MMMM YYYY")),1),e("td",null,[e("div",ue,[e("button",{onClick:ls=>Y(l),class:"edit",style:{width:"30px",height:"30px"}},be,8,me),s(o(J),{href:`/sub-categories/${l.id}`,method:"delete",class:"delete","preserve-scroll":"",style:{width:"30px",height:"30px"}},{default:v(()=>[ge]),_:2},1032,["href"])])])])}),128))])]),e("div",ve,[e("p",null,"Showing "+f($.value.length)+" Sub Categories",1)])])])]),V((m(),w(x,{id:"addCategory"},{default:v(()=>[e("div",null,[pe,e("form",{onSubmit:D(j,["prevent"])},[e("div",_e,[s(n,{for:"Parent Category",value:"Parent Category",class:"d-block mb-2"}),s(L,{label:"name",modelValue:o(u).category_id,"onUpdate:modelValue":t[1]||(t[1]=l=>o(u).category_id=l),reduce:l=>l.id,options:d.categories,searchable:!1,"return-object":"",class:"bt-border-color"},null,8,["modelValue","reduce","options"]),g.value?(m(),w(r,{key:0,message:g.value},null,8,["message"])):k("",!0)]),e("div",he,[s(n,{for:"name",value:"Category Name",class:"d-block mb-2"}),s(c,{class:"bt-border-color w-100 p-2",modelValue:o(u).name,"onUpdate:modelValue":t[2]||(t[2]=l=>o(u).name=l)},null,8,["modelValue"]),s(r,{message:d.errors.name},null,8,["message"])]),e("div",ye,[s(n,{for:"name",value:"Add Image",class:"d-block mb-2"}),e("div",fe,[e("label",we,[Ce,Ve,s(c,{type:"file",id:"category-image",onChange:R})]),e("div",ke,[C.value?(m(),b("img",{key:0,src:C.value,alt:""},null,8,Se)):k("",!0)])]),s(r,{message:d.errors.image},null,8,["message"])]),e("div",Ue,[s(n,{for:"description",value:"Sub Category Description",class:"d-block mb-2"}),s(S,{modelValue:o(a).description,"onUpdate:modelValue":t[3]||(t[3]=l=>o(a).description=l)},null,8,["modelValue"]),s(r,{message:d.errors.description},null,8,["message"])]),e("div",xe,[s(n,{for:"metatitle",value:"Sub Category Meta Title",class:"d-block mb-2"}),s(c,{class:"bt-border-color w-100 p-2",modelValue:o(u).metatitle,"onUpdate:modelValue":t[4]||(t[4]=l=>o(u).metatitle=l)},null,8,["modelValue"]),s(r,{message:d.errors.metatitle},null,8,["message"])]),e("div",Ie,[s(n,{for:"metakeyword",value:"Sub Category Meta Keyword",class:"d-block mb-2"}),s(c,{class:"bt-border-color w-100 p-2",modelValue:o(u).metakeyword,"onUpdate:modelValue":t[5]||(t[5]=l=>o(u).metakeyword=l)},null,8,["modelValue"]),s(r,{message:d.errors.metakeyword},null,8,["message"])]),e("div",$e,[s(n,{for:"metadescription",value:"Sub Category Meta Description",class:"d-block mb-2"}),s(S,{modelValue:o(a).metadescription,"onUpdate:modelValue":t[6]||(t[6]=l=>o(a).metadescription=l)},null,8,["modelValue"]),s(r,{message:d.errors.metadescription},null,8,["message"])]),s(E,{type:"submit",class:"w-100",disabled:o(u).processing},{default:v(()=>[p.value?(m(),b("div",Le,Ne)):(m(),b("span",Ae,"Add Category"))]),_:1},8,["disabled"])],32)])]),_:1})),[[U,void 0,"modal"]]),V((m(),w(x,{id:"editCategory"},{default:v(()=>[e("div",Be,[De,e("form",{onSubmit:t[15]||(t[15]=D(l=>q(o(a).id),["prevent"]))},[e("div",Pe,[s(n,{for:"Parent Category",value:"Parent Category",class:"d-block mb-2"}),s(L,{label:"name",modelValue:o(a).category_id,"onUpdate:modelValue":t[7]||(t[7]=l=>o(a).category_id=l),reduce:l=>l.id,options:d.categories,searchable:!1,"return-object":"",class:"bt-border-color"},null,8,["modelValue","reduce","options"]),g.value?(m(),w(r,{key:0,message:g.value},null,8,["message"])):k("",!0)]),e("div",Ee,[s(n,{for:"name",value:"Category Name",class:"d-block mb-2"}),s(c,{class:"bt-border-color w-100 p-2",modelValue:o(a).name,"onUpdate:modelValue":t[8]||(t[8]=l=>o(a).name=l)},null,8,["modelValue"]),s(r,{message:d.errors.name},null,8,["message"])]),e("div",Re,[s(n,{for:"name",value:"Add Image",class:"d-block mb-2"}),e("div",Te,[e("label",je,[Fe,Ye,s(c,{type:"file",id:"category-edit-image",onChange:F})]),e("div",qe,[_.value?(m(),b("img",{key:0,src:_.value,alt:""},null,8,Ke)):k("",!0)])]),s(r,{message:d.errors.image},null,8,["message"])]),e("div",Oe,[s(n,{for:"slug",value:"Sub Category URL",class:"d-block mb-2"}),s(c,{class:"bt-border-color w-100 p-2",modelValue:o(a).slug,"onUpdate:modelValue":t[9]||(t[9]=l=>o(a).slug=l)},null,8,["modelValue"]),s(r,{message:d.errors.slug},null,8,["message"])]),e("div",Qe,[s(n,{for:"canonicalurl",value:"Sub Category Canonical URL",class:"d-block mb-2"}),s(c,{class:"bt-border-color w-100 p-2",modelValue:o(a).canonicalurl,"onUpdate:modelValue":t[10]||(t[10]=l=>o(a).canonicalurl=l)},null,8,["modelValue"]),s(r,{message:d.errors.canonicalurl},null,8,["message"])]),e("div",Ze,[s(n,{for:"description",value:"Sub Category Description",class:"d-block mb-2"}),s(S,{modelValue:o(a).description,"onUpdate:modelValue":t[11]||(t[11]=l=>o(a).description=l)},null,8,["modelValue"]),s(r,{message:d.errors.description},null,8,["message"])]),e("div",ze,[s(n,{for:"metatitle",value:"Sub Category Meta Title",class:"d-block mb-2"}),s(c,{class:"bt-border-color w-100 p-2",modelValue:o(a).metatitle,"onUpdate:modelValue":t[12]||(t[12]=l=>o(a).metatitle=l)},null,8,["modelValue"]),s(r,{message:d.errors.metatitle},null,8,["message"])]),e("div",Ge,[s(n,{for:"metakeyword",value:"Sub Category Meta Keyword",class:"d-block mb-2"}),s(c,{class:"bt-border-color w-100 p-2",modelValue:o(a).metakeyword,"onUpdate:modelValue":t[13]||(t[13]=l=>o(a).metakeyword=l)},null,8,["modelValue"]),s(r,{message:d.errors.metakeyword},null,8,["message"])]),e("div",He,[s(n,{for:"metadescription",value:"Sub Category Meta Description",class:"d-block mb-2"}),s(S,{modelValue:o(a).metadescription,"onUpdate:modelValue":t[14]||(t[14]=l=>o(a).metadescription=l)},null,8,["modelValue"]),s(r,{message:d.errors.metadescription},null,8,["message"])]),s(E,{type:"submit",class:"w-100",disabled:o(u).processing},{default:v(()=>[p.value?(m(),b("div",Je,Xe)):(m(),b("span",es,"Update Category"))]),_:1},8,["disabled"])],32)])]),_:1})),[[U,void 0,"modal"]])]}),_:1}),V((m(),w(x,{id:"editCategory"},{default:v(()=>[ss]),_:1})),[[U,void 0,"modal"]])],64)}}};export{ms as default};
